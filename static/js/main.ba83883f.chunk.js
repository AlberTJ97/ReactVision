(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e){e.exports={items:[{title:"File",options:[{name:"Load image",id:"load_img"},{name:"Save image",id:"save_img"}]},{title:"Lineal point operations",options:[{name:"Black and white",id:"black_white"},{name:"Lineal picewise adjustment",id:"lineal_adjustment"},{name:"brightness and contrast",id:"brightness_contrast"}]},{title:"Non lineal point operations",options:[{name:"Histogram equalization",id:"histogram_equalization"},{name:"Histogram specification",id:"histogram_specification"},{name:"Gamma Correction",id:"gamma_correction"},{name:"Image difference",id:"image_difference"},{name:"Changes detection",id:"changes_detection"},{name:"Cross Image Selection",id:"cross_image"},{name:"Quantization",id:"image_quantization"}]},{title:"Geometric operations",options:[{name:"Image flipper",id:"image_flipper"},{name:"Transpose image",id:"image_transpose"},{name:"Scale image",id:"scale_image"},{name:"Custom rotation",id:"rotation"},{name:"Entire rotation",id:"rotate_image"}]}]}},202:function(e){e.exports={formats:[{name:"RAW",extension:"raw"},{name:"TIFF",extension:"tiff"},{name:"JPG",extension:"jpg"},{name:"PNG",extension:"png"},{name:"JPEG",extension:"jpeg"}]}},210:function(e,t,a){e.exports=a(425)},215:function(e,t,a){},217:function(e,t,a){},291:function(e,t,a){},385:function(e,t){},387:function(e,t){},423:function(e,t,a){},425:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),o=a.n(i),l=(a(215),a(3)),s=a(6),c=a(8),u=a(7),g=a(9),h=(a(217),a(26)),m=a.n(h),d=a(28),p=a.n(d),f=a(196),v=a.n(f),b=a(134),y=a.n(b),E=a(33),C=a.n(E),I=a(195),O=a.n(I),x=a(135),A=a.n(x),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null,open:!1},a.handleToggle=function(){a.setState(function(e){return{open:!e.open}})},a.handleClose=function(e){if(!a.anchorEl.contains(e.target)){a.setState({open:!1});var t=e.target.id;a.props.updateAction(t)}},a.handleOutClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.options,n=t.title,i=this.state.open;return r.a.createElement("div",null,r.a.createElement(m.a,{buttonRef:function(t){e.anchorEl=t},"aria-owns":i?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:this.handleToggle},n),r.a.createElement(O.a,{open:i,anchorEl:this.anchorEl,transition:!0,disablePortal:!0},function(t){var n=t.TransitionProps,i=t.placement;return r.a.createElement(y.a,Object.assign({},n,{id:"menu-list-grow",style:{transformOrigin:"bottom"===i?"center top":"center bottom"}}),r.a.createElement(C.a,null,r.a.createElement(v.a,{onClickAway:e.handleOutClose},r.a.createElement(A.a,null,a.map(function(t){return r.a.createElement(p.a,{key:t.id,id:t.id,onClick:e.handleClose},t.name)})))))}))}}]),t}(n.Component),j=(a(291),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"title"},r.a.createElement("a",{href:"https://github.com/CristianAbrante/ReactVision"},r.a.createElement("span",{className:"first"},"react"),r.a.createElement("span",{className:"second"},"vision")))}}]),t}(n.Component)),w=a(197),M=a.n(w),N=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.items;return r.a.createElement(C.a,null,r.a.createElement(M.a,null,r.a.createElement(j,null),t.map(function(t){return r.a.createElement(S,{key:t.title,title:t.title,options:t.options,updateAction:e.props.updateAction})})))}}]),t}(n.Component),k=a(139),V=a(10),_=a(25),P=a.n(_),L=(a(11),a(16)),H=a(40),R=a.n(H),F=a(34),X=a.n(F),T=a(199),B=a.n(T),W=a(35),D=a.n(W),G=a(198),U=a.n(G),z=a(44),q=a.n(z),K=a(100),J=a.n(K),Q=a(101),Y=a.n(Q),$={PaperProps:{style:{maxHeight:224,width:250}}},Z=["Red","Green","Blue"],ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={color:[],labelWidth:0},a.handleChange=function(e){a.setState({color:e.target.value});var t=Z.filter(function(t){return!e.target.value.includes(t)});a.props.onColorOptions(e.target.value,t)},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({labelWidth:o.a.findDOMNode(this.InputLabelRef).offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.options,a=(t.accumulative,t.red,t.green,t.blue,t.disableColors),n=this.props.classes;return r.a.createElement("div",{className:"histogram-options"},r.a.createElement(J.a,{control:r.a.createElement(Y.a,{checked:a,value:"Brightness",onChange:this.props.onBrightnessOption}),label:"Brightness"}),r.a.createElement(X.a,{variant:"outlined",className:n.formControl},r.a.createElement(R.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"members"},"Channels"),r.a.createElement(D.a,{multiple:!0,value:this.state.color,onChange:this.handleChange,input:r.a.createElement(q.a,{labelWidth:this.state.labelWidth,name:"channel",id:"outlined-select-multiple-checkbox"}),renderValue:function(e){return e.join(" + ")},MenuProps:$,variant:"outlined"},Z.map(function(t){return r.a.createElement(p.a,{key:t,value:t},r.a.createElement(U.a,{checked:e.state.color.indexOf(t)>-1}),r.a.createElement(B.a,{primary:t}))}))))}}]),t}(n.Component),te=Object(L.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4},noLabel:{marginTop:3*e.spacing.unit}}},{withTheme:!0})(ee),ae=a(24),ne={r:"#d32f2f",g:"#43a047",b:"#1976d2",brightness:"#bdbdbd"},re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={emphasizedValue:null,histogramVisualizationData:[]},a.getSeries=function(e){var t=a.props.accumulative,n=a.props.currentHistogram;if("brightness"===e){if(!a.props.brightness)return null;var r=n.getFormattedData(e,t);return a.getDataSeries(r,ne[e])}if(a.props.brightness)return null;if(a.props[e]){var i=n.getFormattedData(e,t);return a.getDataSeries(i,ne[e])}return null},a.getDataSeries=function(e,t){return r.a.createElement(ae.a,{curve:"curve-natural",color:t,opacity:"0.2",data:e})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",position:"relative",width:"100%",height:"180px"}},r.a.createElement(ae.c,{margin:{top:10,left:70}},r.a.createElement(ae.f,null),r.a.createElement(ae.d,null),r.a.createElement(ae.g,null),r.a.createElement(ae.i,null),this.getSeries("r"),this.getSeries("g"),this.getSeries("b"),this.getSeries("brightness")))}}]),t}(n.Component),ie=a(140),oe=a.n(ie),le=a(142),se=a.n(le),ce=a(53),ue=a.n(ce),ge=a(141),he=a.n(ge),me=a(88),de=a.n(me),pe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={rows:[{variable:"Number of pixel",value:"-"},{variable:"Image width",value:"-"},{variable:"Image height",value:"-"},{variable:"Brightness",value:"-"},{variable:"Contrast",value:"-"},{variable:"Entropy",value:"-"},{variable:"Min value",value:"-"},{variable:"Max value",value:"-"}]},a.getImageProperty=function(e){return a.props.histogram.getImage()[e]()},a.getHistogramProperty=function(e){var t=a.props.histogram[e]().brightness;return t%1===0?t:t.toFixed(3)},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"shouldComponentUpdate",value:function(e){return void 0===this.props.histogram||void 0===e.histogram?(this.state.rows=[{variable:"Number of pixel",value:"-"},{variable:"Image width",value:"-"},{variable:"Image height",value:"-"},{variable:"Brightness",value:"-"},{variable:"Contrast",value:"-"},{variable:"Entropy",value:"-"},{variable:"Min value",value:"-"},{variable:"Max value",value:"-"}],!0):(this.state.rows=[{variable:"Number of pixel",value:this.getImageProperty("getNumberOfPixels")},{variable:"Image width",value:this.getImageProperty("getWidth")},{variable:"Image height",value:this.getImageProperty("getHeight")},{variable:"Brightness",value:this.getHistogramProperty("getMean")},{variable:"Contrast",value:this.getHistogramProperty("getStdVar")},{variable:"Entropy",value:this.getHistogramProperty("getEntropy")},{variable:"Min value",value:this.getHistogramProperty("getMin")},{variable:"Max value",value:this.getHistogramProperty("getMax")}],!0)}},{key:"render",value:function(){this.props.classes;var e=this.state.rows;return r.a.createElement("div",{className:"column",id:"info"},r.a.createElement("div",{className:"column left"},r.a.createElement(oe.a,{padding:"dense"},r.a.createElement(he.a,null,r.a.createElement(de.a,null,r.a.createElement(ue.a,null,"Variable"),r.a.createElement(ue.a,{align:"right"},"Value"))),r.a.createElement(se.a,null,e.slice(0,e.length/2).map(function(e,t){return r.a.createElement(de.a,{key:t},r.a.createElement(ue.a,{component:"th",scope:"row"},e.variable),r.a.createElement(ue.a,{align:"right"},e.value))})))),r.a.createElement("div",{className:"column right"},r.a.createElement(oe.a,null,r.a.createElement(he.a,null,r.a.createElement(de.a,null,r.a.createElement(ue.a,null,"Variable"),r.a.createElement(ue.a,{align:"right"},"Value"))),r.a.createElement(se.a,null,e.slice(e.length/2,e.length).map(function(e,t){return r.a.createElement(de.a,{key:t},r.a.createElement(ue.a,{component:"th",scope:"row"},e.variable),r.a.createElement(ue.a,{align:"right"},e.value))})))))}}]),t}(n.Component),fe=Object(L.withStyles)(function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4}}})(pe),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isClosed:!1},a.handleCloseEvent=function(e){a.setState({isClosed:!0})},t.windowCount++,a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props;return r.a.createElement(C.a,{className:"grid-item"},r.a.createElement("div",{className:"windows-bar"},r.a.createElement("div",{className:"header",style:{flex:1,marginLeft:"24px"}},e.title)),r.a.createElement("div",{className:"windows-content"},e.children))}}]),t}(n.Component);ve.windowCount=0;var be=ve,ye=Object(L.createMuiTheme)({palette:{primary:{light:"#ffffff",main:"#eceff1",dark:"#babdbe",contrastText:"#000000"},secondary:{light:"#f05545",main:"#b71c1c",dark:"#7f0000",contrastText:"#ffffff"}},typography:{useNextVariants:!0}}),Ee=(a(352),a(102)),Ce=a.n(Ee),Ie=a(103),Oe=a.n(Ie),xe=a(87),Ae=a.n(xe);function Se(e){var t=e.children,a=e.dir;return r.a.createElement(P.a,{component:"div",dir:a,style:{padding:"7px 15px"}},t)}var je=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={accumulative:!1,red:!1,green:!1,blue:!1,disableColors:!0,value:0},a.handleChange=function(e,t){a.setState({value:t}),1===t?a.setState({accumulative:!0}):a.setState({accumulative:!1})},a.renderHistogram=function(){var e=a.props.controller.getCurrentHistogram();return void 0===e?r.a.createElement("div",{className:"empty-histogram"},r.a.createElement(P.a,{component:"span"},"Histogram")):r.a.createElement(re,{accumulative:a.state.accumulative,brightness:a.state.disableColors,r:a.state.red,g:a.state.green,b:a.state.blue,currentHistogram:e})},a.handleBrightnessVisualization=function(){a.setState({disableColors:!a.state.disableColors,red:!1,blue:!1,green:!1})},a.handleHistogramVisualization=function(){a.setState({accumulative:!a.state.accumulative})},a.handleColorsVisualization=function(e,t){e.length>0?a.setState({disableColors:!1}):a.setState({disableColors:!0}),e.forEach(function(e){a.setState(Object(V.a)({},e.toLowerCase(),!0))}),t.forEach(function(e){a.setState(Object(V.a)({},e.toLowerCase(),!1))})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.controller.getCurrentHistogram(),t=this.state.value;return r.a.createElement(be,{title:"Image info"},r.a.createElement(Ce.a,{id:"info-tabs",position:"static",color:"default"},r.a.createElement(Oe.a,{value:this.state.value,onChange:this.handleChange,variant:"fullWidth",centered:!0},r.a.createElement(Ae.a,{label:"Histogram"}),r.a.createElement(Ae.a,{label:"Accumulative histogram"}))),(0===t||1===t)&&r.a.createElement(Se,{dir:ye.direction},r.a.createElement("div",{className:"windows histogram"},r.a.createElement(te,{options:this.state,onHistogramOption:this.handleHistogramVisualization,onColorOptions:this.handleColorsVisualization,onBrightnessOption:this.handleBrightnessVisualization}),this.renderHistogram(),r.a.createElement(fe,{histogram:e}))))}}]),t}(n.Component),we=Object(L.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}})(je),Me=function e(t,a,n,r){var i=this;Object(l.a)(this,e),this.getTitle=function(){return i.title},this.getFormat=function(){return i.format},this.getNumberOfStates=function(){return i.dataHistory.length},this.isAnyState=function(){return 0!==i.getNumberOfStates()},this.createNewState=function(){if(i.isAnyState()){var e=i.getCurrentStateData().slice();i.setNewState(e,i.getWidth(),i.getHeight())}},this.createNewBlankState=function(e,t){for(var a=[],n=e*t*4,r=0;r<n;r++)a.push(0);i.setNewState(a,e,t)},this.setNewState=function(e,t,a){for(var n={width:t,height:a,data:e};i.isAnyState()&&i.dataHistoryIndex!==i.getNumberOfStates()-1;)i.dataHistory.pop();i.dataHistory.push(n)},this.setInitialState=function(){i.dataHistoryIndex=0},this.setPreviousState=function(){0!==i.dataHistoryIndex&&(i.dataHistoryIndex-=1)},this.setNextState=function(){i.dataHistoryIndex!==i.getNumberOfStates()-1&&(i.dataHistoryIndex+=1)},this.getImageData=function(){return new ImageData(new Uint8ClampedArray(i.getCurrentStateData()),i.getWidth(),i.getHeight())},this.getCurrentState=function(){return i.dataHistory[i.dataHistoryIndex]},this.getCurrentStateData=function(){return i.getCurrentState().data},this.getWidth=function(){return i.getCurrentState().width},this.getHeight=function(){return i.getCurrentState().height},this.getNumberOfPixels=function(){return i.getWidth()*i.getHeight()},this.indexesAreInRange=function(e,t){return e>=0&&e<i.getWidth()&&t>=0&&t<i.getHeight()},this.getColorIndex=function(e,t){return i.indexesAreInRange(e,t)?t*(4*i.getWidth())+4*e:void 0},this.getComponent=function(e){return i.getCurrentStateData()[e]},this.setComponent=function(e,t){i.getCurrentStateData()[e]=t},this.getColor=function(t,a,n){if("brightness"===n)return i.getBrightness(t,a);var r=e.colorComponent[n];if(void 0===r)throw new Error("unknown component: "+n);var o=i.getColorIndex(t,a);if(void 0===o)throw new Error("("+t+", "+a+") are not in range.");return i.getComponent(o+r)},this.setColor=function(t,a,n,r){if("brightness"!==n){if(!e.colorIsInRange(r))throw new Error("color is not in range: "+r);var o=e.colorComponent[n];if(void 0===o)throw new Error("unknown component: "+n);var l=i.getColorIndex(t,a);if(void 0===l)throw new Error("("+t+", "+a+") are not in range.");i.setComponent(l+o,r)}else i.setBrightness(t,a,r)},this.getRedComponent=function(e,t){return i.getColor(e,t,"r")},this.setRedComponent=function(e,t,a){i.setColor(e,t,"r",a)},this.getGreenComponent=function(e,t){return i.getColor(e,t,"g")},this.setGreenComponent=function(e,t,a){i.setColor(e,t,"g",a)},this.getBlueComponent=function(e,t){return i.getColor(e,t,"b")},this.setBlueComponent=function(e,t,a){i.setColor(e,t,"b",a)},this.getAlphaComponent=function(e,t){return i.getColor(e,t,"a")},this.setAlphaComponent=function(e,t,a){i.setColor(e,t,"a",a)},this.getBrightness=function(e,t){var a=i.getRGBComponents(e,t);return Math.round(.222*a.r+.707*a.g+.071*a.b)},this.setBrightness=function(e,t,a){i.setRGBComponents(e,t,a,a,a)},this.getRGBComponents=function(e,t){return{r:i.getRedComponent(e,t),g:i.getGreenComponent(e,t),b:i.getBlueComponent(e,t)}},this.setRGBComponents=function(e,t,a,n,r){i.setRedComponent(e,t,a),i.setGreenComponent(e,t,n),i.setBlueComponent(e,t,r)},this.getRGBAComponents=function(e,t){var a=i.getRGBComponents(e,t);return{r:a.r,g:a.g,b:a.b,a:i.getAlphaComponent(e,t)}},this.setRGBAComponets=function(e,t,a,n,r,o){i.setRGBComponents(e,t,a,n,r),i.setAlphaComponent(e,t,o)},this.title=t.replace(/\..+/i,""),this.format=t.split(".").pop(),this.dataHistory=[],this.dataHistorySizes=[],this.dataHistoryIndex=0,void 0===r?this.createNewBlankState():this.setNewState(r,a,n)};Me.MIN_PIXEL_VALUE=0,Me.MAX_PIXEL_VALUE=256,Me.colorComponent={r:0,g:1,b:2,a:3},Me.colorIsInRange=function(e){return e>=Me.MIN_PIXEL_VALUE&&e<Me.MAX_PIXEL_VALUE};var Ne=Me,ke=a(201),Ve=a.n(ke),_e=function(){function e(){var t=this;Object(l.a)(this,e),this.getReadFile=function(){return t.image},this.setImage=function(e){var a=e.shape,n=3===a.length?a[0]:a[1],r=3===a.length?a[1]:a[2];t.image=new Ne(t.fileName,n,r,e.data)}}return Object(s.a)(e,[{key:"getImageData",value:function(){return this.imageData}},{key:"load",value:function(t,a){var n=this;if(!t.files)throw new Error("browser do not support image loading");var r=t.files[0];if(this.fileName=r.name,!e.isAnImage(r))throw new Error("should load a valid image file.");var i=new FileReader;i.onload=function(){Ve()(i.result,function(e,t){if(e)throw new Error(e.message);n.setImage(t),a()})},i.readAsDataURL(r)}}],[{key:"isAnImage",value:function(e){return e.type.includes("image")}}]),e}(),Pe=a(207),Le=a(86),He=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).action=r.a.createElement(Le.a,{color:"secondary",size:"small",onClick:a.props.handler},"close"),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Pe.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.props.open,onClose:this.props.handler,ContentProps:{"aria-describedby":"message-id"},message:this.props.errorMsg,action:this.action})}}]),t}(n.Component),Re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:!1,errorMsg:"error"},a.handleError=function(e){a.setState({error:!0,errorMsg:e})},a.closeError=function(e){a.setState({error:!1})},a.handleChange=function(e){var t=new _e,n=a.props.controller;try{t.load(a.inputElem.current,function(){var e=t.getReadFile();n.add(e)})}catch(e){a.handleError(e.message)}},a.openFileDialog=function(){a.inputElem.current.click()},a.inputElem=r.a.createRef(),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.inputElem.current.click()}},{key:"componentDidUpdate",value:function(){this.inputElem.current.click()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{ref:this.inputElem,type:"file",style:{display:"none"},onChange:this.handleChange}),r.a.createElement(He,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),Fe=a(75),Xe=a(202),Te=a(203),Be=a.n(Te),We=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={format:"",error:!1,errorMsg:"error",labelWidth:0},a.handleError=function(e){a.setState({error:!0,errorMsg:e})},a.handleFormChange=function(e){a.setState(Object(V.a)({},e.target.name,e.target.value))},a.closeError=function(e){a.setState({error:!1})},a.saveFile=function(){try{if(a.props.controller.numberOfImages()<=0)throw new Error("there isn't any image to download.");if(""===a.state.format)throw new Error("you have to select one image format.");var e=a.props.controller,t=a.state.format;e.getCanvas().toBlob(function(a){Be()(a,e.getSelectedImage().getTitle()+"."+t)})}catch(n){a.handleError(n.message)}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({labelWidth:o.a.findDOMNode(this.InputLabelRef).offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=Xe.formats;return r.a.createElement("div",null,r.a.createElement(P.a,{variant:"overline",style:{padding:"4px 0"}},"Save image"),r.a.createElement(Fe.a,null),r.a.createElement("div",null,r.a.createElement(X.a,{variant:"outlined",className:t.formControl},r.a.createElement(R.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-format-simple"},"Format"),r.a.createElement(D.a,{value:this.state.format,onChange:this.handleFormChange,input:r.a.createElement(q.a,{labelWidth:this.state.labelWidth,name:"format",id:"outlined-format-simple"})},a.map(function(e){return r.a.createElement(p.a,{key:e.extension,value:e.extension},e.name)})))),r.a.createElement("div",null,r.a.createElement(Le.a,{className:t.button,label:"Save file",onClick:this.saveFile},"Download")),r.a.createElement(He,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),De=Object(L.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,width:100},button:{margin:e.spacing.unit}}})(We),Ge=a(42),Ue=a.n(Ge),ze=function e(t){var a=this;Object(l.a)(this,e),this.fillTable=function(e){a.values=[];for(var t=0;t<Ne.MAX_PIXEL_VALUE;t++)a.appendValue(e.perform(t))},this.getValue=function(e){return a.inputIsValid(e)?a.values[e]:void 0},this.appendValue=function(e){a.inputIsValid(e)&&a.values.push(e)},this.inputIsValid=function(e){return e>=0&&e<Ne.MAX_PIXEL_VALUE},this.fillTable(t)},qe=function e(){Object(l.a)(this,e),this.perform=function(e){return e}},Ke=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}var n=new qe,r=new ze(n);e.applyPointOperation(r,"brightness")}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Ue.a,null)))}}]),t}(n.Component),Je=a(52),Qe=a.n(Je),Ye=a(65),$e=a.n(Ye),Ze=function e(t,a){var n=this;Object(l.a)(this,e),this.get=function(e){if(void 0===e)throw new Error("x is undefined.");return n.a*e+n.b},this.setEquationComponents=function(e,t){if(void 0===e||void 0===t)throw new Error("points can not be undefined.");if(e.x===t.x)throw new Error("points x coordinate can not be equal.");n.a=(t.y-e.y)/(t.x-e.x),n.b=e.y-n.a*e.x},this.setEquationComponents(t,a)},et=Ne.MIN_PIXEL_VALUE,tt=Ne.MAX_PIXEL_VALUE-1,at=function e(){var t=this;Object(l.a)(this,e),this.insert=function(e){if(!t.valueIsValid(e.x)||!t.valueIsValid(e.y))throw new Error("point has not valid values: "+e.x+" "+e.y);if(e.x===tt)t.points.pop(),t.points.push(e);else{var a=t.getIntervalIndex(e.x);t.points[a-1].x===e.x?t.points.splice(a-1,1,e):t.points.splice(a,0,e)}t.setFunctions()},this.perform=function(e){if(!t.valueIsValid(e))throw new Error("level is not in range.");var a=t.getIntervalIndex(e)-1,n=t.functions[a].get(e);return t.clampValue(n)},this.getIntervalIndex=function(e){for(var a=1;a<t.points.length;a++)if(e<t.points[a].x)return a;return t.points.length-1},this.setFunctions=function(){t.functions=[];for(var e=0;e<t.points.length-1;e++){var a=t.points[e],n=t.points[e+1];t.functions.push(new Ze(a,n))}},this.valueIsValid=function(e){return e>=et&&e<=tt},this.clampValue=function(e){return e<et?et:e>tt?tt:Math.round(e)};var a={x:et,y:et},n={x:tt,y:tt};this.points=[a,n],this.setFunctions()},nt=12,rt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).operationHasBeenApplied=!1,a.state={x:0,y:0,linealPicewiseOperation:null,maxPointsReached:!1},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}var n=new ze(a.state.linealPicewiseOperation);e.applyPointOperation(n,"brightness")}},a.onChipDelete=function(e){return function(){console.log(e.x+" "+e.y)}},a.updateState=function(){a.setState({linealPicewiseOperator:a.state.linealPicewiseOperation})},a.onInsertionValueChanged=function(e){return function(t){var n=t.target.value;n>=Ne.MIN_PIXEL_VALUE&&n<Ne.MAX_PIXEL_VALUE&&a.setState(Object(V.a)({},e,n))}},a.addPoint=function(){var e=a.state,t=e.x,n=e.y,r=e.linealPicewiseOperation;t=Number.parseFloat(t),n=Number.parseFloat(n),"string"!==typeof t&&"string"!==typeof n&&(r.insert({x:t,y:n}),r.points.length===nt&&a.setState({maxPointsReached:!0}),a.updateState(),a.applyOperation())},a.state.linealPicewiseOperation=new at,a.applyOperation(),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.linealPicewiseOperation.points;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},r.a.createElement(ae.h,{width:200,height:200},r.a.createElement(ae.d,null),r.a.createElement(ae.f,null),r.a.createElement(ae.g,null),r.a.createElement(ae.i,null),r.a.createElement(ae.e,{color:ye.palette.secondary.main,data:e}))),r.a.createElement("div",null,e.map(function(e){return r.a.createElement($e.a,{key:"x: "+e.x+" y: "+e.y,style:{margin:"5px"},label:"x: "+e.x+" y: "+e.y,color:"secondary",variant:"outlined"})})),r.a.createElement("div",null,r.a.createElement(Qe.a,{style:{margin:"15px"},label:"X",value:this.state.x,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("x")}),r.a.createElement(Qe.a,{style:{margin:"15px"},label:"Y",value:this.state.y,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("y")})),r.a.createElement("div",null,r.a.createElement(m.a,{mini:!0,variant:"fab",color:"secondary","aria-label":"Add",onClick:this.addPoint,disabled:this.state.maxPointsReached},r.a.createElement(Ue.a,null))))}}]),t}(n.Component),it=a(78),ot=a.n(it),lt=function e(t,a,n,r){var i=this;Object(l.a)(this,e),this.setOldMean=function(e){i.valueIsValid(e)&&(i.oldMean=e)},this.setOldStdVar=function(e){i.valueIsValid(e)&&(i.oldStdVar=e)},this.setNewMean=function(e){i.valueIsValid(e)&&(i.newMean=e)},this.setNewStdVar=function(e){i.valueIsValid(e)&&(i.newStdVar=e)},this.perform=function(e){if(void 0!==e){var t=Math.round(i.newStdVar/i.oldStdVar*(e-i.oldMean)+i.newMean);return i.clampValue(t)}},this.valueIsValid=function(e){return e>=Ne.MIN_PIXEL_VALUE&&e<Ne.MAX_PIXEL_VALUE},this.clampValue=function(e){return e<Ne.MIN_PIXEL_VALUE?Ne.MIN_PIXEL_VALUE:e>=Ne.MAX_PIXEL_VALUE?Ne.MAX_PIXEL_VALUE-1:e},this.setOldMean(t),this.setNewMean(n),this.setOldStdVar(n),this.setNewStdVar(r)},st={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"200px",margin:"auto",padding:"22px 0px"},thumb:{background:ye.palette.secondary.main}},ct=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).operationHasBeenApplied=!1,a.state={brightnessValue:0,contrastValue:0},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}var n=a.state,r=n.brightnessValue,i=n.contrastValue;a.brightnessAndContrast.setNewMean(r),a.brightnessAndContrast.setNewStdVar(i);var o=new ze(a.brightnessAndContrast);e.applyPointOperation(o,"brightness")}},a.onBrightnessSliderChange=function(e,t){a.setState({brightnessValue:t}),a.applyOperation()},a.onBrightnessTextFieldChange=function(e){var t=e.target.value;t<Ne.MAX_PIXEL_VALUE&&t>=Ne.MIN_PIXEL_VALUE&&a.setState({brightnessValue:Number.parseFloat(e.target.value)}),a.applyOperation()},a.onContrastSliderChange=function(e,t){a.setState({contrastValue:t}),a.applyOperation()},a.onContrastTextFieldChange=function(e){var t=e.target.value;t<Ne.MAX_PIXEL_VALUE&&t>=Ne.MIN_PIXEL_VALUE&&a.setState({contrastValue:e.target.value}),a.applyOperation()};var n=a.props.controller;a.brightnessAndContrast=new lt(0,0,0,0);var r=n.getCurrentHistogram();return void 0!==r&&(a.state.brightnessValue=r.getMean().brightness,a.state.contrastValue=r.getStdVar().brightness,a.brightnessAndContrast.setOldMean(a.state.brightnessValue),a.brightnessAndContrast.setOldStdVar(a.state.contrastValue)),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.brightnessValue,n=t.contrastValue;return r.a.createElement("div",null,r.a.createElement("div",{className:e.root},r.a.createElement(P.a,{id:"label",style:{padding:"15px"}},"Brightness"),r.a.createElement(ot.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:Ne.MIN_PIXEL_VALUE,max:Ne.MAX_PIXEL_VALUE-1,value:a,"aria-labelledby":"label",onChange:this.onBrightnessSliderChange}),r.a.createElement(Qe.a,{style:{margin:"15px"},id:"standard-number",value:a,type:"number",className:e.textField,max:255,margin:"normal",onChange:this.onBrightnessTextFieldChange,color:"secondary"})),r.a.createElement("div",{className:e.root},r.a.createElement(P.a,{id:"label",style:{padding:"15px"}},"Contrast"),r.a.createElement(ot.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:Ne.MIN_PIXEL_VALUE,max:Ne.MAX_PIXEL_VALUE-1,value:n,"aria-labelledby":"label",onChange:this.onContrastSliderChange}),r.a.createElement(Qe.a,{style:{margin:"15px"},id:"standard-number",value:n,type:"number",className:e.textField,max:255,margin:"normal",onChange:this.onContrastTextFieldChange,color:"secondary"})))}}]),t}(n.Component),ut=Object(L.withStyles)(st)(ct),gt=Ne.MIN_PIXEL_VALUE,ht=Ne.MAX_PIXEL_VALUE-1,mt=function e(t){var a=this;Object(l.a)(this,e),this.perform=function(e){return a.clampValue(Math.round(a.histogram.getAccumulativeCount(e).brightness/a.k)-1)},this.valueIsValid=function(e){return e>=gt&&e<=ht},this.clampValue=function(e){return e<gt?gt:e>ht?ht:Math.round(e)},this.histogram=t,this.k=this.histogram.getNumberOfPixels()/ht},dt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()&&!a.operationHasBeenApplied){var t=e.getSelectedImage(),n=e.getCurrentHistogram();t.createNewState(),t.setNextState();var r=new mt(n),i=new ze(r);e.applyPointOperation(i,"brightness"),a.operationHasBeenApplied=!0}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Equalization"))}}]),t}(n.Component),pt=Ne.MIN_PIXEL_VALUE,ft=Ne.MAX_PIXEL_VALUE-1,vt=function e(t,a){var n=this;Object(l.a)(this,e),this.perform=function(e){if(!n.valueIsValid(e))throw new Error("invalid level: "+e);for(var t=n.toTransformHistogram.getAccumulativeProbability(e).brightness,a=0;a<=ft;){if(n.referenceHistogram.getAccumulativeProbability(a).brightness>=t)return a;a+=1}},this.valueIsValid=function(e){return e>=pt&&e<=ft},this.toTransformHistogram=t,this.referenceHistogram=a},bt=a(37),yt=a.n(bt),Et=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).operationHasBeenApplied=!1,a.state={referenceHistogramTitle:"",referenceHistogram:void 0},a.applyOperation=function(){console.log("clicked");var e=a.props.controller,t=a.state.referenceHistogram;if(e.isAnyImageSelected()&&void 0!==t){var n=e.getSelectedImage();a.operationHasBeenApplied||((n=e.getSelectedImage()).createNewState(),n.setNextState(),a.operationHasBeenApplied=!0);var r=e.getCurrentHistogram();a.histogramSpecificationOperation=new vt(r,t);var i=new ze(a.histogramSpecificationOperation);e.applyPointOperation(i,"brightness")}},a.handleChange=function(e){var t=a.props.controller,n=e.target.value,r=t.getImageIndex(n),i=t.histograms[r];a.setState({referenceHistogramTitle:n,referenceHistogram:i})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.controller,t=e.getImageTitles();return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(X.a,{style:{minWidth:200,margin:ye.spacing.unit}},r.a.createElement(R.a,{htmlFor:"age-simple"},"Reference Image"),r.a.createElement(D.a,{value:this.state.referenceHistogramTitle,inputProps:{name:"referenceHistogram",id:"age-simple"},onChange:this.handleChange,disabled:!e.isAnyImageSelected()},t.map(function(e){return r.a.createElement(p.a,{key:e,value:e},e)}))),r.a.createElement(yt.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Specification")))}}]),t}(n.Component),Ct=a(43),It=a.n(Ct),Ot=a(29),xt=a.n(Ot),At=Ne.MIN_PIXEL_VALUE,St=Ne.MAX_PIXEL_VALUE-1,jt=function e(t){var a=this;Object(l.a)(this,e),this.setGamma=function(t){t>e.GAMMA_MIN&&t<=e.GAMMA_MAX&&(a.gamma=t)},this.perform=function(e){if(!a.valueIsValid(e))throw new Error("level is not valid: "+e);var t=St*Math.pow(e/St,a.gamma);return a.clampValue(t)},this.valueIsValid=function(e){return e>=At&&e<=St},this.clampValue=function(e){return e<At?At:e>St?St:Math.round(e)},this.setGamma(t)};jt.GAMMA_MIN=0,jt.GAMMA_MAX=20;var wt=jt,Mt={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"150px",margin:"auto"},thumb:{background:ye.palette.secondary.main}},Nt=wt.GAMMA_MIN+1,kt=wt.GAMMA_MAX,Vt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).operationHasBeenApplied=!1,a.state={inverted:!1,gamma:Nt},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}console.log(a.getGammaValue());var n=new wt(a.getGammaValue()),r=new ze(n);e.applyPointOperation(r,"brightness")}},a.getGammaData=function(){for(var e=[],t=0;t<1;t+=.01)e.push({x:t,y:Math.pow(t,a.getGammaValue())});return e},a.invertedChecked=function(e){a.setState({inverted:e.target.checked})},a.getGammaValue=function(){return a.state.inverted?1/a.state.gamma:a.state.gamma},a.onGammaChange=function(e,t){a.setState({gamma:t})},a.onGammaTextChange=function(e){var t=Number.parseFloat(e.target.value);t>=Nt&&t<=kt&&a.setState({gamma:t})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},r.a.createElement(ae.h,{width:200,height:200},r.a.createElement(ae.d,null),r.a.createElement(ae.f,null),r.a.createElement(ae.g,null),r.a.createElement(ae.i,null),r.a.createElement(ae.e,{curve:"curveMonotoneX",color:ye.palette.secondary.main,data:this.getGammaData()}))),r.a.createElement("div",{className:e.root},r.a.createElement(J.a,{control:r.a.createElement(Y.a,{checked:this.state.inverted,onChange:this.invertedChecked,value:"checkedA"}),label:"inverse"}),r.a.createElement(It.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:Nt,max:kt,value:this.state.gamma,"aria-labelledby":"label",onChange:this.onGammaChange}),r.a.createElement(xt.a,{style:{margin:"15px"},value:this.state.gamma,type:"number",margin:"normal",onChange:this.onGammaTextChange,color:"secondary"})),r.a.createElement(yt.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Gamma Correction"))}}]),t}(n.Component),_t=Object(L.withStyles)(Mt)(Vt),Pt=a(57),Lt=a.n(Pt),Ht=a(85),Rt=a.n(Ht),Ft=a(58),Xt=a.n(Ft),Tt=a(56),Bt=a.n(Tt),Wt=function e(){var t=this;Object(l.a)(this,e),this.perform=function(e,a){if(!t.imagesHaveTheSameSize(e,a))throw new Error("images do not have the same size");var n=e.getWidth(),r=e.getHeight();t.resultImage=new Ne("difference.png",n,r);for(var i=0;i<n;i++)for(var o=0;o<r;o++){var l=e.getBrightness(i,o),s=a.getBrightness(i,o),c=Math.abs(l-s);t.resultImage.setBrightness(i,o,c),t.resultImage.setAlphaComponent(i,o,255)}},this.imagesHaveTheSameSize=function(e,t){return e.getWidth()===t.getWidth()&&e.getHeight()===t.getHeight()}},Dt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={imageTitle:"",referenceImage:void 0,error:!1,errorMsg:""},a.applyOperation=function(){var e=a.props.controller,t=a.state.referenceImage;if(e.isAnyImageSelected()&&void 0!==t){var n=new Wt,r=e.getSelectedImage();try{n.perform(r,t),e.add(n.resultImage)}catch(i){a.setState({error:!0,errorMsg:i.message})}}},a.closeError=function(){a.setState({error:!1})},a.handleChange=function(e){var t=a.props.controller,n=e.target.value,r=t.getImageIndex(n),i=t.images[r];a.setState({imageTitle:n,referenceImage:i})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.controller,t=e.getImageTitles();return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(Lt.a,{style:{minWidth:200,margin:ye.spacing.unit}},r.a.createElement(Rt.a,{htmlFor:"age-simple"},"Reference Image"),r.a.createElement(Xt.a,{value:this.state.imageTitle,inputProps:{name:"referenceHistogram",id:"age-simple"},onChange:this.handleChange,disabled:!e.isAnyImageSelected()},t.map(function(e){return r.a.createElement(Bt.a,{key:e,value:e},e)}))),r.a.createElement(yt.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Difference")),r.a.createElement(He,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),Gt=function e(t){var a=this;Object(l.a)(this,e),this.perform=function(e,t){var n=new Wt;n.perform(e,t),a.resultImage=n.resultImage;for(var r=0;r<a.resultImage.getWidth();r++)for(var i=0;i<a.resultImage.getHeight();i++)a.resultImage.getBrightness(r,i)>a.threshold&&a.resultImage.setRGBComponents(r,i,255,0,0)},this.threshold=t},Ut={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"150px",margin:"auto"},thumb:{background:ye.palette.secondary.main}},zt=Ne.MIN_PIXEL_VALUE,qt=Ne.MAX_PIXEL_VALUE-1,Kt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={imageTitle:"",referenceImage:void 0,error:!1,errorMsg:"",threshold:0},a.applyOperation=function(){var e=a.props.controller,t=a.state.referenceImage;if(e.isAnyImageSelected()&&void 0!==t){var n=new Gt(a.state.threshold),r=e.getSelectedImage();try{n.perform(r,t),e.add(n.resultImage)}catch(i){a.setState({error:!0,errorMsg:i.message})}}},a.closeError=function(){a.setState({error:!1})},a.handleChange=function(e){var t=a.props.controller,n=e.target.value,r=t.getImageIndex(n),i=t.images[r];a.setState({imageTitle:n,referenceImage:i})},a.onThresholdChange=function(e,t){a.setState({threshold:t})},a.onThresholdTextChange=function(e){var t=Number.parseFloat(e.target.value);t>=zt&&t<=qt&&a.setState({threshold:t})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.controller,a=e.classes,n=t.getImageTitles();return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(Lt.a,{style:{minWidth:200,margin:ye.spacing.unit}},r.a.createElement(Rt.a,{htmlFor:"age-simple"},"Reference Image"),r.a.createElement(Xt.a,{value:this.state.imageTitle,inputProps:{name:"referenceHistogram",id:"age-simple"},onChange:this.handleChange,disabled:!t.isAnyImageSelected()},n.map(function(e){return r.a.createElement(Bt.a,{key:e,value:e},e)}))),r.a.createElement("div",{className:a.root},r.a.createElement(It.a,{classes:{container:a.slider,track:a.thumb,thumb:a.thumb},min:zt,max:qt,value:this.state.threshold,"aria-labelledby":"label",onChange:this.onThresholdChange}),r.a.createElement(xt.a,{style:{margin:"15px"},value:this.state.threshold,type:"number",margin:"normal",onChange:this.onThresholdTextChange,color:"secondary"})),r.a.createElement(yt.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Detect changes")),r.a.createElement(He,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),Jt=Object(L.withStyles)(Ut)(Kt);var Qt=function(e){return r.a.createElement(ae.b,{height:180,margin:{left:10,right:10,top:10,bottom:40},stackBy:"y"},r.a.createElement(ae.f,null),r.a.createElement(ae.d,null),r.a.createElement(ae.g,{hideLine:!0}),r.a.createElement(ae.e,{data:e.data,color:ye.palette.secondary.main}))},Yt=a(137),$t=a.n(Yt),Zt=a(136),ea=a.n(Zt),ta=a(204),aa=a.n(ta),na=function(){function e(t,a,n,r){var i=this;Object(l.a)(this,e),this.crossSelection=[],this.derivativeCrossSelection=[],this.radius=1,this.setRadius=function(t){e.isAValidRadius(t)&&(i.radius=t)},this.setReferenceImage=function(e){void 0!==e&&(i.referenceImage=e,i.crossSelection=[],i.derivativeCrossSelection=[])},this.setCrossSelection=function(e,t){if(void 0===i.referenceImage)throw new Error("reference image is undefined.");if(!i.pixelIsInRange(e))throw new Error("pixel {"+e.x+", "+e.y+"} is not in range.");if(!i.pixelIsInRange(t))throw new Error("pixel {"+t.x+", "+t.y+"} is not in range.");var a=aa()(e.x,e.y,t.x,t.y);i.crossSelection=[],i.derivativeCrossSelection=[];for(var n=0;n<a.length;n++){var r=a[n],o=i.getColor(r),l=i.getDerivativeColor(a,n);i.addData(i.crossSelection,r,o),i.addData(i.derivativeCrossSelection,r,l)}},this.getFormattedCrossSelection=function(){return i.getFormattedData(i.crossSelection)},this.getFormattedDerivativeSelection=function(){return i.getFormattedData(i.derivativeCrossSelection)},this.getColor=function(e){for(var t=0,a=0,n=e.x-i.radius;n<=e.x+i.radius;n++)for(var r=e.y-i.radius;r<=e.y+i.radius;r++){var o=i.getNormalizedColor(n,r);void 0!==o&&(t+=o,a+=1)}return t/a},this.getDerivativeColor=function(e,t){if(t>=0&&t<e.length){var a=e[t];if(t===e.length-1)return a;var n=e[t+1],r=i.getColor(a);return i.getColor(n)-r}},this.addData=function(e,t,a){e.push({x:t.x,y:t.y,color:a})},this.getFormattedData=function(e){for(var t=[],a=0,n=0;n<e.length;n++){var r=e[n];t.push({x:a,y:r.color}),a+=1}return t},this.pixelIsInRange=function(e){return e.x>=0&&e.x<i.referenceImage.getWidth()&&e.y>=0&&e.y<i.referenceImage.getHeight()},this.getNormalizedColor=function(e,t){try{return i.referenceImage.getBrightness(e,t)}catch(a){return}},this.setReferenceImage(t),this.setRadius(a),this.setCrossSelection(n,r)}return Object(s.a)(e,null,[{key:"isAValidRadius",value:function(e){return e>=this.MIN_RADIUS&&e<=this.MAX_RADIUS}}]),e}();na.MIN_RADIUS=0,na.MAX_RADIUS=10;var ra=na,ia={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"150px",margin:"auto"},thumb:{background:ye.palette.secondary.main}},oa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={crossImageSelection:void 0,derivative:!1,radius:0,beginPoint:{x:0,y:0},endPoint:{x:0,y:0}},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){var t=e.getSelectedImage();a.setState({crossImageSelection:a.getSectionOperation(t,a.state.radius,a.state.beginPoint,a.state.endPoint)}),a.displaySectionLine()}},a.getSectionOperation=function(e,t,a,n){return new ra(e,t,a,n)},a.getData=function(){if(void 0!==a.state.crossImageSelection)return a.state.derivative?a.state.crossImageSelection.getFormattedDerivativeSelection():a.state.crossImageSelection.getFormattedCrossSelection()},a.onInsertionValueChanged=function(e,t){return function(n){var r=a.props.controller.getSelectedImage(),i=Number.parseInt(n.target.value);if(void 0!==r&&void 0!==i){var o={x:"x"===t?i:a.state[e].x,y:"y"===t?i:a.state[e].y};a.pointIsValid(o,r)&&a.setState(Object(V.a)({},e,o))}}},a.onSwitchChecked=function(e){return function(t){a.setState(Object(V.a)({},e,t.target.checked))}},a.pointIsValid=function(e,t){return e.x>=0&&e.x<t.getWidth()&&e.y>=0&&e.y<t.getHeight()},a.displaySectionLine=function(){var e=function(e,t){e.arc(t.x,t.y,3,0,2*Math.PI,!1),e.fillStyle="red",e.fill()},t=a.state,n=t.beginPoint,r=t.endPoint,i=a.props.controller;i.updateImageCanvas();var o=i.getCanvas().getContext("2d");o.beginPath(),o.moveTo(n.x,n.y),o.lineTo(r.x,r.y),o.lineWidth=2,o.strokeStyle="red",o.stroke(),e(o,n),e(o,r)},a.onRadiusChanged=function(e,t){a.setState({radius:t})},a.onRadiusTextChange=function(e){var t=Number.parseInt(e.target.value);ra.isAValidRadius(t)&&a.setState({gamma:t})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(ea.a,{control:r.a.createElement($t.a,{checked:this.state.derivative,onChange:this.onSwitchChecked("derivative"),value:"checkedA"}),label:"derivative"})),r.a.createElement("div",null,r.a.createElement(Qt,{data:this.getData()}),r.a.createElement("div",{className:e.root},r.a.createElement(It.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:ra.MIN_RADIUS,max:ra.MAX_RADIUS,step:1,value:this.state.radius,"aria-labelledby":"label",onChange:this.onRadiusChanged}),r.a.createElement(xt.a,{style:{margin:"15px"},value:this.state.radius,type:"number",margin:"normal",onChange:this.onRadiusTextChange,color:"secondary"})),r.a.createElement("div",null,r.a.createElement(xt.a,{style:{margin:"15px"},label:"X",value:this.state.beginPoint.x,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("beginPoint","x")}),r.a.createElement(xt.a,{style:{margin:"15px"},label:"Y",value:this.state.beginPoint.y,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("beginPoint","y")})),r.a.createElement("div",null,r.a.createElement(xt.a,{style:{margin:"15px"},label:"X",value:this.state.endPoint.x,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("endPoint","x")}),r.a.createElement(xt.a,{style:{margin:"15px"},label:"Y",value:this.state.endPoint.y,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("endPoint","y")})),r.a.createElement(yt.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Visualize")))}}]),t}(n.Component),la=Object(L.withStyles)(ia)(oa),sa=a(106),ca=a.n(sa),ua=function e(){Object(l.a)(this,e)};ua.quantizeImage=function(e,t){for(var a=Math.pow(2,t)-1,n=0;n<e.getHeight();n++)for(var r=0;r<e.getWidth();r++){var i=e.getBrightness(r,n),o=Math.round(a*i/(Ne.MAX_PIXEL_VALUE-1)),l=Math.floor(o*(Ne.MAX_PIXEL_VALUE-1)/a);e.setBrightness(r,n,l)}};var ga=ua,ha=function e(){Object(l.a)(this,e)};ha.MAX_VALUE=5,ha.MIN_VALUE=1,ha.resample=function(e,t,a){for(var n=0;n<e.getHeight();n++)for(var r=0;r<e.getWidth();r++)if(r%t==0&&n%a==0){for(var i=[],o=r;o<r+t;o++)for(var l=n;l<n+a;l++)if(o<e.getWidth()&&l<e.getHeight()){var s=e.getRGBAComponents(o,l);i.push({i:o,j:l,rgbcolor:s})}for(var c={r:0,g:0,b:0,a:0},u=0;u<i.length;u++)c.r+=i[u].rgbcolor.r,c.g+=i[u].rgbcolor.g,c.b+=i[u].rgbcolor.b,c.a+=i[u].rgbcolor.a;c=Object.values(c).map(function(e){return e/(t*a)});for(var g=0;g<i.length;g++)e.setRGBAComponets(i[g].i,i[g].j,c[0],c[1],c[2],c[3])}};var ma=ha,da={root:{width:400,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{padding:"22px 0px",margin:"auto"},thumb:{background:ye.palette.secondary.main},formControl:{margin:ye.spacing.unit,minWidth:120}},pa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={quantizationLevel:8,resampleRows:1,resampleCols:1},a.applyOperation=function(){var e=a.props.controller;e.isAnyImageSelected()&&(e.getSelectedImage().createNewState(),e.getSelectedImage().setNextState(),ma.resample(e.getSelectedImage(),a.state.resampleRows,a.state.resampleCols),ga.quantizeImage(e.getSelectedImage(),a.state.quantizationLevel),e.updateImageHistogram(),e.updateImageCanvas(),e.updateMethod())},a.onQuantizationLevelChange=function(e,t){a.setState({quantizationLevel:t})},a.onQuantizationLevelTextChange=function(e){var t=Number.parseInt(e.target.value);t>Ne.MIN_PIXEL_VALUE&&t<=Math.log2(Ne.MAX_PIXEL_VALUE)&&a.setState({quantizationLevel:t})},a.onResampleSizeChange=function(e){var t=Number.parseInt(e.target.value),n=a.props.controller.getSelectedImage();t>0&&t<=Math.min(n.getWidth(),n.getHeight())&&a.setState(Object(V.a)({},e.target.name,t))},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;this.props.controller;return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"180px",margin:"auto"}},r.a.createElement(It.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},value:this.state.quantizationLevel,min:Ne.MIN_PIXEL_VALUE+1,max:Math.log2(Ne.MAX_PIXEL_VALUE),step:1,onChange:this.onQuantizationLevelChange}),r.a.createElement(xt.a,{style:{margin:"15px"},value:this.state.quantizationLevel,type:"number",InputProps:{endAdornment:r.a.createElement(ca.a,{position:"start"},"bits")},onChange:this.onQuantizationLevelTextChange,color:"secondary"}),r.a.createElement(xt.a,{name:"resampleRows",style:{margin:"15px"},value:this.state.resampleRows,type:"number",InputProps:{endAdornment:r.a.createElement(ca.a,{position:"start"},"rows")},onChange:this.onResampleSizeChange,color:"secondary"}),r.a.createElement(xt.a,{name:"resampleCols",style:{margin:"15px"},value:this.state.resampleCols,type:"number",InputProps:{endAdornment:r.a.createElement(ca.a,{position:"start"},"columns")},onChange:this.onResampleSizeChange,color:"secondary"}),r.a.createElement(m.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply quantization")))}}]),t}(n.Component),fa=Object(L.withStyles)(da)(pa),va=function e(){Object(l.a)(this,e)};va.applyGeometricChange=function(e){for(var t=new Ne(e.getTitle(),e.getWidth(),e.getHeight(),e.getImageData().data),a=0;a<t.getHeight()-1;a++)for(var n=0;n<t.getWidth()-1;n++){var r=t.getRGBAComponents(n,a);e.setRGBAComponets(n,t.getHeight()-1-a,r.r,r.g,r.b,r.a)}};var ba=va,ya=function e(){Object(l.a)(this,e)};ya.applyGeometricChange=function(e){for(var t=new Ne(e.getTitle(),e.getWidth(),e.getHeight(),e.getImageData().data),a=0;a<t.getHeight()-1;a++)for(var n=0;n<t.getWidth()-1;n++){var r=t.getRGBAComponents(n,a);e.setRGBAComponets(t.getWidth()-1-n,a,r.r,r.g,r.b,r.a)}};var Ea=ya,Ca=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={flipType:"",labelWidth:0},a.applyOperation=function(){var e=a.props.controller;e.getSelectedImage().createNewState(),e.getSelectedImage().setNextState(),"vertical"===a.state.flipType?ba.applyGeometricChange(e.getSelectedImage()):Ea.applyGeometricChange(e.getSelectedImage()),e.updateImageHistogram(),e.updateImageCanvas(),e.updateMethod()},a.handleFormChange=function(e){a.setState(Object(V.a)({},e.target.name,e.target.value))},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(X.a,{variant:"outlined",className:t.formControl},r.a.createElement(R.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-flipType-simple"},"Flyp type"),r.a.createElement(D.a,{value:this.state.flipType,onChange:this.handleFormChange,input:r.a.createElement(q.a,{labelWidth:this.state.labelWidth,name:"flipType",id:"outlined-flipType-simple"})},r.a.createElement(p.a,{key:"horizontal",value:"horizontal"},"Horizontal"),r.a.createElement(p.a,{key:"vertical",value:"vertical"},"Vertical"))),r.a.createElement(m.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Ue.a,null)))}}]),t}(n.Component),Ia=Object(L.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,width:100},button:{margin:e.spacing.unit}}})(Ca),Oa=function e(){Object(l.a)(this,e)};Oa.applyGeometricChange=function(e){for(var t=[],a=0,n=0;n<e.getHeight();n++){for(var r=0;r<e.getWidth();r++,a+=4*e.getHeight()){var i=e.getRGBAComponents(r,n);t[a]=i.r,t[a+1]=i.g,t[a+2]=i.b,t[a+3]=i.a}a=4*(n+1)}e.setNewState(Uint8ClampedArray.from(t),e.getHeight(),e.getWidth()),e.setNextState()};var xa=Oa,Aa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1,errorMsg:"error"},a.handleError=function(e){a.setState({error:!0,errorMsg:e})},a.closeError=function(e){a.setState({error:!1})},a.applyOperation=function(){var e=a.props.controller.getSelectedImage();xa.applyGeometricChange(e),a.props.controller.updateImageHistogram(),a.props.controller.updateImageCanvas(),a.props.controller.updateMethod()},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(m.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Ue.a,null))),r.a.createElement(He,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),Sa=function e(t,a){var n=this;Object(l.a)(this,e),this.perform=function(e,t){var a=Math.round(n.horizontalFactor*e.getWidth()),r=Math.round(n.verticalFactor*e.getHeight());e.createNewBlankState(a,r),e.setNextState();for(var i=1;i<e.getWidth()-1;i++)for(var o=1;o<e.getHeight()-1;o++){var l={x:i/n.horizontalFactor,y:o/n.verticalFactor};e.setPreviousState();var s=t.interpolateColor(e,l);e.setNextState(),e.setBrightness(i,o,s),e.setAlphaComponent(i,o,255)}e.setNextState()},this.setVerticalFactorFromWidth=function(e,t){n.setVerticalFactor(t/e)},this.setHoorizontalFactorFromHeight=function(e,t){n.setHorizontalFactor(t/e)},this.setFactor=function(e){n.setVerticalFactor(e),n.setHorizontalFactor(e)},this.setVerticalFactor=function(t){e.factorIsValid(t)&&(n.verticalFactor=t)},this.setHorizontalFactor=function(t){e.factorIsValid(t)&&(n.horizontalFactor=t)},this.setVerticalFactor(a),this.setHorizontalFactor(t)};Sa.FACTOR_MIN=.1,Sa.FACTOR_MAX=4,Sa.factorIsValid=function(e){return void 0!==e&&e>=Sa.FACTOR_MIN&&e<=Sa.FACTOR_MAX};var ja=Sa,wa=function(){function e(){var t=this;Object(l.a)(this,e),this.getNeighbourhood=function(e,a){var n=Math.floor(a.x),r=Math.floor(a.y);return{A:t.getNeighbour(e,n,r),B:t.getNeighbour(e,n+1,r),C:t.getNeighbour(e,n,r+1),D:t.getNeighbour(e,n+1,r+1)}},this.getNeighbour=function(a,n,r){return{x:n,y:r,color:t.isInBounds(a,n,r)?a.getBrightness(n,r):e.OVER_LIMITS_COLOR}}}return Object(s.a)(e,[{key:"isInBounds",value:function(e,t,a){return t>=0&&t<e.getWidth()&&a>=0&&a<e.getHeight()}}]),e}();wa.OVER_LIMITS_COLOR=0;var Ma=wa,Na=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolateColor=function(e,t){for(var n,r=a.getPositionBound(e,t),i=a.getNeighbourhood(e,t),o=Object.keys(i),l=0;l<o.length;l++){var s=i[o[l]];s.x===r.x&&s.y===r.y&&(n=o[l])}return i[n].color},a.getPositionBound=function(e,t){var a=Math.round(t.x),n=Math.round(t.y);return{x:a<e.getWidth()?a:a-1,y:n<e.getHeight()?n:n-1}},a}return Object(g.a)(t,e),t}(Ma),ka=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolateColor=function(e,t){var n=a.getNeighbourhood(e,t),r=Math.floor(t.x),i=Math.floor(t.y),o=t.x-r,l=t.y-i,s=n.A.color,c=n.B.color,u=n.C.color,g=(s+n.D.color-c-u)*o*l+(u-s)*l+(c-s)*o+s;return a.clampResult(g)},a.clampResult=function(e){var t=Math.round(e);return t<Ne.MIN_PIXEL_VALUE&&(t=Ne.MIN_PIXEL_VALUE),t>=Ne.MAX_PIXEL_VALUE&&(t=Ne.MAX_PIXEL_VALUE-1),t},a}return Object(g.a)(t,e),t}(Ma),Va={root:{width:400,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"180px",margin:"auto"},thumb:{background:ye.palette.secondary.main},formControl:{margin:ye.spacing.unit,minWidth:120}},_a={nearestNeighbour:new Na,bilineal:new ka},Pa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolatorsText=["nearestNeighbour","bilineal"],a.state={xFactor:ja.FACTOR_MIN,yFactor:ja.FACTOR_MIN,selectedInterpolator:a.interpolatorsText[0]},a.getSelectedInterpolator=function(){return _a[a.state.selectedInterpolator]},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){var t=e.getSelectedImage(),n=a.getSelectedInterpolator(),r=a.getFactor();new ja(r.x,r.y).perform(t,n),t.setNextState(),e.updateImageHistogram(),e.updateImageCanvas(),e.resetActionMethod(void 0),e.updateMethod()}},a.getFactor=function(){return{x:a.state.xFactor,y:a.state.yFactor}},a.onFactorChanged=function(e){return function(t,n){a.setState(Object(V.a)({},e,n))}},a.onFactorTextChanged=function(e){return function(t){var n=Number.parseFloat(t.target.value);ja.factorIsValid(n)&&a.setState(Object(V.a)({},e,n))}},a.onInterpolatorSelected=function(e){a.setState({selectedInterpolator:e.target.value})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(X.a,{className:e.formControl},r.a.createElement(D.a,{value:this.state.selectedInterpolator,onChange:this.onInterpolatorSelected,autoWidth:!0},this.interpolatorsText.map(function(e){return r.a.createElement(p.a,{key:e,value:e},e)}))),r.a.createElement("div",{className:e.root},r.a.createElement(P.a,{variant:"caption",style:{margin:10}},"Horizontal factor"),r.a.createElement(ot.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:ja.FACTOR_MIN,max:ja.FACTOR_MAX,value:this.state.xFactor,"aria-labelledby":"label",onChange:this.onFactorChanged("xFactor")}),r.a.createElement(Qe.a,{style:{margin:"15px"},value:this.state.xFactor,type:"number",margin:"normal",onChange:this.onFactorTextChanged("xFactor"),color:"secondary"})),r.a.createElement("div",{className:e.root},r.a.createElement(P.a,{variant:"caption",style:{margin:10}},"Vertical factor"),r.a.createElement(ot.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:ja.FACTOR_MIN,max:ja.FACTOR_MAX,value:this.state.yFactor,"aria-labelledby":"label",onChange:this.onFactorChanged("yFactor")}),r.a.createElement(Qe.a,{style:{margin:"15px"},value:this.state.yFactor,type:"number",margin:"normal",onChange:this.onFactorTextChanged("yFactor"),color:"secondary"})),r.a.createElement(m.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Scaling"))}}]),t}(n.Component),La=Object(L.withStyles)(Va)(Pa),Ha=function e(){Object(l.a)(this,e)};Ha.applyGeometricChange=function(e,t){for(var a=t/360*4-4*parseInt(t/360,10),n=new Ne(e.getTitle(),e.getWidth(),e.getHeight(),e.getImageData().data),r=[];a>0;a--){for(var i=n.getWidth()-1;i>=0;i--)for(var o=0;o<n.getHeight();o++){var l=n.getRGBAComponents(i,o);r.push(l.r),r.push(l.g),r.push(l.b),r.push(l.a)}n=Ha.newImage(n,r),r=[]}e.setNewState(Uint8ClampedArray.from(n.getImageData().data),n.getWidth(),n.getHeight()),e.setNextState()},Ha.newImage=function(e,t){return new Ne(e.getTitle(),e.getHeight(),e.getWidth(),Uint8ClampedArray.from(t))};var Ra=Ha,Fa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={rotationDegrees:"",labelWidth:0},a.applyOperation=function(){var e=a.props.controller.getSelectedImage();Ra.applyGeometricChange(e,a.state.rotationDegrees),a.props.controller.updateImageHistogram(),a.props.controller.updateImageCanvas(),a.props.controller.updateMethod()},a.handleFormChange=function(e){a.setState(Object(V.a)({},e.target.name,e.target.value))},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(X.a,{variant:"outlined",className:t.formControl},r.a.createElement(R.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-rotationDegrees-simple"},"Degrees"),r.a.createElement(D.a,{value:this.state.rotationDegrees,onChange:this.handleFormChange,input:r.a.createElement(q.a,{labelWidth:this.state.labelWidth,name:"rotationDegrees",id:"outlined-rotationDegrees-simple"})},r.a.createElement(p.a,{key:"0",value:"0"},"0\xba"),r.a.createElement(p.a,{key:"90",value:"90"},"90\xba"),r.a.createElement(p.a,{key:"180",value:"180"},"180\xba"),r.a.createElement(p.a,{key:"270",value:"270"},"270\xba"))),r.a.createElement(m.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Ue.a,null)))}}]),t}(n.Component),Xa=Object(L.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,width:100},button:{margin:e.spacing.unit}}})(Fa),Ta=function(){function e(){var t=this;Object(l.a)(this,e),this.createNewImageState=function(e,a){var n=t.getNewImageWidthAndHeight(e,a);e.createNewBlankState(n.width,n.height)},this.getImageCorners=function(e){var t=e.getWidth()-1,a=e.getHeight()-1;return{topLeft:{x:0,y:0},topRight:{x:t,y:0},bottomLeft:{x:0,y:a},bottomRight:{x:t,y:a}}},this.getRotatedImageCorners=function(e,a){for(var n=t.getImageCorners(e),r={},i=Object.keys(n),o=0;o<i.length;o++){var l=i[o];r[l]=t.getRotationPosition(a,n[l])}return r},this.getNewImageWidthAndHeight=function(e,a){var n=t.getRotatedImageCorners(e,a),r=t.getMinMaxCorners(n);return{width:Math.round(Math.abs(r.max.x-r.min.x)),height:Math.round(Math.abs(r.max.y-r.min.y))}},this.getMinMaxCorners=function(e){for(var t=[],a=[],n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t.push(e[i].x),a.push(e[i].y)}return{min:{x:Math.min.apply(Math,t),y:Math.min.apply(Math,a)},max:{x:Math.max.apply(Math,t),y:Math.max.apply(Math,a)}}},this.getRotationPosition=function(e,t){var a=t.x,n=t.y,r=e*Math.PI/180;return{x:a*Math.cos(r)+n*Math.sin(r),y:-a*Math.sin(r)+n*Math.cos(r)}},this.getDirectPosition=function(e,a,n){var r=t.getRotationPosition(e,a),i=r.x,o=r.y;return{x:i+Math.abs(n.min.x),y:o+Math.abs(n.min.y)}},this.getInversePosition=function(e,t,a){var n=t.x,r=t.y,i=Math.abs(a.min.x),o=Math.abs(a.min.y),l=e*Math.PI/180;return{x:(n-i)*Math.cos(l)+(o-r)*Math.sin(l),y:(n-i)*Math.sin(l)+(r-o)*Math.cos(l)}},this.clampIndexes=function(e,t){for(var a=Object.keys(t),n=0;n<a.length;n++){var r=a[n];t[r]=Math.round(t[r]),t[r]<0&&(t[r]=0)}t.x>=e.getWidth()&&(t.x=e.getWidth()-1),t.y>=e.getHeight()&&(t.y=e.getHeight()-1)}}return Object(s.a)(e,null,[{key:"angleIsValid",value:function(t){return t>=e.MIN_ANGLE&&t<=e.MAX_ANGLE}}]),e}();Ta.MIN_ANGLE=-360,Ta.MAX_ANGLE=360;var Ba=Ta,Wa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).perform=function(e,t){var n=a.getRotatedImageCorners(e,t),r=a.getMinMaxCorners(n);a.createNewImageState(e,t);for(var i=0;i<e.getWidth();i++)for(var o=0;o<e.getHeight();o++){var l=e.getBrightness(i,o),s=a.getDirectPosition(t,{x:i,y:o},r);e.setNextState(),a.clampIndexes(e,s),e.setBrightness(s.x,s.y,l),e.setAlphaComponent(s.x,s.y,255),e.setPreviousState()}},a}return Object(g.a)(t,e),t}(Ba),Da=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).perform=function(e,t,n){var r=a.getRotatedImageCorners(e,t),i=a.getMinMaxCorners(r);a.createNewImageState(e,t),e.setNextState();for(var o=0;o<e.getWidth();o++)for(var l=0;l<e.getHeight();l++){var s=a.getInversePosition(t,{x:o,y:l},i);if(e.setPreviousState(),a.positionIsValid(s,e)){var c=n.interpolateColor(e,s);e.setNextState(),e.setBrightness(o,l,c),e.setAlphaComponent(o,l,255)}e.setNextState()}},a.positionIsValid=function(e,t){return e.x>=0&&e.x<t.getWidth()&&e.y>=0&&e.y<t.getHeight()},a}return Object(g.a)(t,e),t}(Ba),Ga=a(55),Ua=a.n(Ga),za={root:{width:400,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"180px",margin:"auto"},thumb:{background:ye.palette.secondary.main},formControl:{margin:ye.spacing.unit,minWidth:120}},qa=(Ba.MAX_ANGLE+Ba.MIN_ANGLE)/2,Ka=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolators={nearestNeighbour:new Na,bilineal:new ka},a.rotationMethods={raw:new Wa,interpolated:new Da},a.state={angle:qa,selectedInterpolator:Object.keys(a.interpolators)[0],selectedRotationMethod:Object.keys(a.rotationMethods)[0]},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){var t=e.getSelectedImage(),n=a.state.angle;a.getRotationMethod().perform(t,n,a.getInterpolator()),t.setNextState(),e.updateImageHistogram(),e.updateImageCanvas(),e.resetActionMethod(void 0),e.updateMethod()}},a.getRotationMethod=function(){return a.rotationMethods[a.state.selectedRotationMethod]},a.getInterpolator=function(){return a.interpolators[a.state.selectedInterpolator]},a.onAngleChanged=function(e,t){a.setState({angle:t})},a.onAngleTextChanged=function(e){var t=Number.parseFloat(e.target.value);Ba.angleIsValid(t)&&a.setState({angle:t})},a.onInterpolatorSelected=function(e){a.setState({selectedInterpolator:e.target.value})},a.onRotationMethodSelected=function(e){a.setState({selectedRotationMethod:e.target.value})},a.interpolatorSelectorDisabled=function(){return"interpolated"!==a.state.selectedRotationMethod},a.getHeader=function(){},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(Lt.a,{className:e.formControl},r.a.createElement(Xt.a,{value:this.state.selectedRotationMethod,onChange:this.onRotationMethodSelected,autoWidth:!0},Object.keys(this.rotationMethods).map(function(e){return r.a.createElement(Bt.a,{key:e,value:e},e)}))),r.a.createElement(Lt.a,{className:e.formControl},r.a.createElement(Xt.a,{value:this.state.selectedInterpolator,onChange:this.onInterpolatorSelected,disabled:this.interpolatorSelectorDisabled(),autoWidth:!0},Object.keys(this.interpolators).map(function(e){return r.a.createElement(Bt.a,{key:e,value:e},e)}))),r.a.createElement("div",{className:e.root},r.a.createElement(Ua.a,{variant:"caption",style:{margin:10}},"Horizontal factor"),r.a.createElement(It.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:Ba.MIN_ANGLE,max:Ba.MAX_ANGLE,value:this.state.angle,"aria-labelledby":"label",onChange:this.onAngleChanged}),r.a.createElement(xt.a,{style:{margin:"15px"},value:this.state.angle,type:"number",margin:"normal",onChange:this.onAngleTextChanged,color:"secondary"})),r.a.createElement(yt.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Rotation"))}}]),t}(n.Component),Ja=Object(L.withStyles)(za)(Ka),Qa={load_img:function(e){return r.a.createElement(Re,{controller:e})},save_img:function(e){return r.a.createElement(De,{controller:e})},black_white:function(e){return r.a.createElement(Ke,{controller:e})},lineal_adjustment:function(e){return r.a.createElement(rt,{controller:e})},brightness_contrast:function(e){return r.a.createElement(ut,{controller:e})},histogram_equalization:function(e){return r.a.createElement(dt,{controller:e})},histogram_specification:function(e){return r.a.createElement(Et,{controller:e})},gamma_correction:function(e){return r.a.createElement(_t,{controller:e})},image_difference:function(e){return r.a.createElement(Dt,{controller:e})},changes_detection:function(e){return r.a.createElement(Jt,{controller:e})},cross_image:function(e){return r.a.createElement(la,{controller:e})},image_flipper:function(e){return r.a.createElement(Ia,{controller:e})},image_transpose:function(e){return r.a.createElement(Aa,{controller:e})},scale_image:function(e){return r.a.createElement(La,{controller:e})},rotate_image:function(e){return r.a.createElement(Xa,{controller:e})},rotation:function(e){return r.a.createElement(Ja,{controller:e})},image_quantization:function(e){return r.a.createElement(fa,{controller:e})}},Ya=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"renderAction",value:function(){var e=this.props.currentAction,t=this.props.controller;return void 0===e?r.a.createElement(P.a,null,"Pick any action from the menu."):Qa[e](t)}},{key:"render",value:function(){return r.a.createElement(be,{title:this.props.currentActionName},this.renderAction())}}]),t}(n.Component),$a=a(23),Za=a(138),en=a.n(Za),tn=a(50),an=a.n(tn),nn=20,rn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e,t){a.props.controller.updateSelectedImage(t)},a.handleCloseEvent=function(e,t){a.props.controller.delete(a.props.controller.getImageIndex(t)),e.stopPropagation()},a.reduceTittle=function(e){return e.length>nn&&(e=e.slice(0,e.length).replace(/.{3}$/i,"...")),e},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.controller;return r.a.createElement("div",{className:t.root},a.isAnyImageSelected()&&r.a.createElement(Ce.a,{position:"static",color:"default"},r.a.createElement(Oe.a,{value:this.props.controller.getSelectedImageIndex(),onChange:this.handleChange,scrollable:!0,scrollButtons:"auto"},a.getImageTitles().map(function(t){return r.a.createElement(Ae.a,{component:"div",key:t,label:r.a.createElement("div",null,e.reduceTittle(t),r.a.createElement(an.a,{style:{marginRight:"-20%"},color:"secondary","aria-label":"Add an alarm",onClick:function(a){return e.handleCloseEvent(a,t)}},r.a.createElement(en.a,null)))})}))))}}]),t}(r.a.Component),on=Object(L.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"}}})(rn),ln=a(205),sn=a.n(ln),cn=a(45),un=a.n(cn),gn={padding:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},hn=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).calculateColor=function(){var e=a.props.controller.getSelectedImage(),t=a.props.position,n=t.x,r=t.y;return void 0!==e&&e.indexesAreInRange(n,r)&&-1!==n&&-1!==r?"rgb("+e.getRedComponent(n,r)+", "+e.getGreenComponent(n,r)+", "+e.getBlueComponent(n,r)+")":"white"},a.calculateColorText=function(){var e=a.props.controller.getSelectedImage(),t=a.props.position,n=t.x,r=t.y;return void 0!==e&&e.indexesAreInRange(n,r)&&-1!==n&&-1!==r?"r:"+e.getRedComponent(n,r)+" g:"+e.getGreenComponent(n,r)+" b:"+e.getBlueComponent(n,r)+" ":"r:- g:- b:-"},a.calculatePosition=function(){var e=a.props.controller.getSelectedImage(),t=a.props.position,n=t.x,r=t.y;return void 0===e||-1===n||-1===r?"x:- y:-":"x:"+n+" y:"+r},a.duplicateActualImage=function(){if(a.props.controller.numberOfImages()>0){var e=a.props.controller.getSelectedImage(),t=new Ne(e.getTitle()+" - Duplicated."+e.getFormat(),e.getWidth(),e.getHeight(),e.getImageData().data);a.props.controller.add(t)}},a.updateImageState=function(e){return function(){var t=a.props.controller,n=t.getSelectedImage();if(void 0!==n){switch(e){case"undo":n.setPreviousState();break;case"redo":n.setNextState();break;case"restore":n.setInitialState()}t.updateImageHistogram(),t.updateImageCanvas(),t.resetActionMethod(void 0),t.updateMethod()}}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{style:gn},r.a.createElement("div",null,r.a.createElement($e.a,{avatar:r.a.createElement(sn.a,{style:{background:this.calculateColor()}}),style:{marginRight:"5px"},label:this.calculateColorText(),color:"secondary",variant:"outlined"}),r.a.createElement($e.a,{label:this.calculatePosition(),color:"secondary",variant:"outlined"})),r.a.createElement("div",null,r.a.createElement("span",{style:{borderRight:"1px solid #babdbe"}},r.a.createElement(an.a,{color:"secondary",onClick:this.duplicateActualImage},r.a.createElement(un.a,null,"add_to_photos"))),r.a.createElement(an.a,{color:"secondary",onClick:this.updateImageState("undo")},r.a.createElement(un.a,null,"undo")),r.a.createElement(an.a,{color:"secondary",onClick:this.updateImageState("restore")},r.a.createElement(un.a,null,"compare")),r.a.createElement(an.a,{color:"secondary",onClick:this.updateImageState("redo")},r.a.createElement(un.a,null,"redo"))))}}]),t}(n.Component),mn=a(206),dn=a.n(mn),pn=(a(81),{background:ye.palette.primary.main,height:"100%",display:"flex",flexDirection:"column",alignContent:"stretch"}),fn={display:"flex",justifyContent:"center",alignItems:"center",height:"95%",overflow:"auto"},vn={background:"rgba(0, 102, 204, 0.5)"},bn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={x:-1,y:-1,regions:[]},a.canvasMovement=function(e){a.setState({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})},a.mouseLeaved=function(e){a.setState({x:-1,y:-1})},a.setCropState=function(){a.state.cropEnabled=!a.state.cropEnabled},a.handleCrop=function(){var e=a.props.controller.getSelectedImage(),t=e.getWidth()*(a.state.regions[0].x/100),n=e.getHeight()*(a.state.regions[0].y/100),r=e.getWidth()*(a.state.regions[0].width/100),i=e.getHeight()*(a.state.regions[0].height/100),o=a.props.controller.getCanvas().getContext("2d").getImageData(t,n,r,i);a.handleKeyPress();var l=new Ne(e.getTitle()+" - Copy."+e.getFormat(),o.width,o.height,o.data);a.props.controller.add(l)},a.handleKeyPress=function(){a.setState({regions:[]})},a.canvasRef=r.a.createRef(),a.regionRenderer=a.regionRenderer.bind(Object($a.a)(Object($a.a)(a))),a.updateRegions=a.updateRegions.bind(Object($a.a)(Object($a.a)(a))),a.props.keyController("Escape",a.handleKeyPress),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.controller.setCanvas(this.canvasRef.current)}},{key:"updateRegions",value:function(e){this.props.controller.numberOfImages()>0&&this.setState({regions:e})}},{key:"regionRenderer",value:function(e){if(!e.isChanging)return r.a.createElement("div",{style:{position:"absolute",bottom:"-2.5em"}},r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:this.handleCrop},"Crop"))}},{key:"render",value:function(){var e={display:this.props.controller.numberOfImages>0?"none":"block"};return r.a.createElement(C.a,{style:pn},r.a.createElement(on,{controller:this.props.controller}),r.a.createElement("div",{className:"",style:fn},r.a.createElement(dn.a,{maxRegions:1,regions:this.state.regions,regionStyle:vn,constraint:!0,regionRenderer:this.regionRenderer,onChange:this.updateRegions,style:e},r.a.createElement("canvas",{ref:this.canvasRef,onMouseMove:this.canvasMovement,onMouseLeave:this.mouseLeaved},"Your browser do not support canvas"))),r.a.createElement(hn,{position:this.state,controller:this.props.controller}))}}]),t}(n.Component),yn=(a(423),{textDecoration:"none",color:ye.palette.secondary.main});var En=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,null,r.a.createElement("span",null,"By "),r.a.createElement("a",{style:yn,href:"https://github.com/CristianAbrante"},"Cristian Abrante"),r.a.createElement("span",null," & "),r.a.createElement("a",{style:yn,href:"https://github.com/AlberTJ97"},"Alberto Gonz\xe1lez")))},Cn=function e(t){var a=this;Object(l.a)(this,e),this.count={r:[],g:[],b:[],brightness:[]},this.accumulative={r:[],g:[],b:[],brightness:[]},this.min={r:0,g:0,b:0,brightness:0},this.max={r:0,g:0,b:0,brightness:0},this.mean={r:0,g:0,b:0,brightness:0},this.stdVar={r:0,g:0,b:0,brightness:0},this.entropy={r:0,g:0,b:0,brightness:0},this.setImage=function(e){a.image=e,a.setCount(),a.setAccumulativeCount(),a.setMean(),a.setStdVar(),a.setMinMax(),a.setEntropy()},this.getCount=function(e){return{r:a.count.r[e],g:a.count.g[e],b:a.count.b[e],brightness:a.count.brightness[e]}},this.getAccumulativeCount=function(e){return{r:a.accumulative.r[e],g:a.accumulative.g[e],b:a.accumulative.b[e],brightness:a.accumulative.brightness[e]}},this.getProbability=function(e){return{r:a.getCount(e).r/a.getNumberOfPixels(),g:a.getCount(e).g/a.getNumberOfPixels(),b:a.getCount(e).b/a.getNumberOfPixels(),brightness:a.getCount(e).brightness/a.getNumberOfPixels()}},this.getAccumulativeProbability=function(e){return{r:a.getAccumulativeCount(e).r/a.getNumberOfPixels(),g:a.getAccumulativeCount(e).g/a.getNumberOfPixels(),b:a.getAccumulativeCount(e).b/a.getNumberOfPixels(),brightness:a.getAccumulativeCount(e).brightness/a.getNumberOfPixels()}},this.getMean=function(){return a.mean},this.getStdVar=function(){return a.stdVar},this.getMax=function(){return a.max},this.getMin=function(){return a.min},this.getEntropy=function(){return a.entropy},this.getImage=function(){return a.image},this.getImageWidth=function(){return a.getImage().getWidth()},this.getImageHeight=function(){return a.getImage().getHeight()},this.getNumberOfPixels=function(){return a.getImage().getNumberOfPixels()},this.getFormattedCount=function(e){return a.formatData(a.count[e])},this.getFormattedAccumulativeCount=function(e){return a.formatData(a.accumulative[e])},this.getFormattedData=function(e,t){return t?a.getFormattedAccumulativeCount(e):a.getFormattedCount(e)},this.formatData=function(e){for(var t=[],a=0;a<e.length;a++)t.push({x:a,y:e[a]});return t},this.initializeObject=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)e[t[a]]=Array.apply(null,Array(Ne.MAX_PIXEL_VALUE)).fill(0)},this.setCount=function(){a.initializeObject(a.count);for(var e=Object.keys(a.count),t=0;t<a.getImageWidth();t++)for(var n=0;n<a.getImageHeight();n++)if(0!==a.image.getAlphaComponent(t,n))for(var r=0;r<e.length;r++){var i=e[r],o=a.image.getColor(t,n,i);a.count[i][o]+=1}},this.setAccumulativeCount=function(){a.initializeObject(a.accumulative);for(var e=Object.keys(a.accumulative),t=0;t<e.length;t++){var n=e[t];a.accumulative[n][0]=a.getCount(0)[n]}for(var r=1;r<Ne.MAX_PIXEL_VALUE;r++)for(var i=0;i<e.length;i++){var o=e[i],l=a.getAccumulativeCount(r-1)[o],s=a.getCount(r)[o];a.accumulative[o][r]=l+s}},this.setMean=function(){for(var e=Object.keys(a.mean),t=0;t<Ne.MAX_PIXEL_VALUE;t++)for(var n=0;n<e.length;n++){var r=e[n];a.mean[r]+=a.getCount(t)[r]*t}for(var i=0;i<e.length;i++){var o=e[i];a.mean[o]/=a.getNumberOfPixels()}},this.setStdVar=function(){for(var e=Object.keys(a.stdVar),t=0;t<Ne.MAX_PIXEL_VALUE;t++)for(var n=0;n<e.length;n++){var r=e[n];a.stdVar[r]+=a.getCount(t)[r]*Math.pow(t-a.mean[r],2)}for(var i=0;i<e.length;i++){var o=e[i];a.stdVar[o]=Math.sqrt(a.stdVar[o]/a.getNumberOfPixels())}},this.setMinMax=function(){for(var e=Object.keys(a.min),t={},n=0;n<e.length;n++)t[e[n]]=!1;for(var r=0;r<Ne.MAX_PIXEL_VALUE;r++)for(var i=0;i<e.length;i++){var o=e[i];0!==a.getCount(r)[o]&&(t[o]||(a.min[o]=r,t[o]=!0),a.max[o]=r)}},this.setEntropy=function(){a.entropy={r:0,g:0,b:0,brightness:0};for(var e=Object.keys(a.entropy),t=0;t<Ne.MAX_PIXEL_VALUE;t++)for(var n=0;n<e.length;n++){var r=e[n],i=a.getProbability(t)[r];0!==i&&i>=0&&(a.entropy[r]+=i*Math.log2(i))}for(var o=0;o<e.length;o++){var l=e[o];a.entropy[l]=-a.entropy[l]}},this.setImage(t)},In=function(){function e(t,a){var n=this;Object(l.a)(this,e),this.add=function(e){n.images.push(e),n.histograms.push(new Cn(e)),n.selected=n.numberOfImages()-1,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.delete=function(e){e>-1&&(n.images.splice(e,1),n.histograms.splice(e,1)),n.selected==n.images.length||n.selected>e?n.selected--:e==n.selected&&(e<n.selected||e>n.selected)&&n.selected--,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.numberOfImages=function(){return n.images.length},this.getImageTitles=function(){return n.images.map(function(e){return e.getTitle()})},this.setCanvas=function(e){n.canvas=e},this.getCanvas=function(){return n.canvas},this.updateSelectedImage=function(e){n.selected=e,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.setImage=function(e,t){n.images[e]=t,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.updateImageCanvas=function(){var e=n.getSelectedImage(),t=n.canvas.getContext("2d");void 0!==e?(n.canvas.width=e.getWidth(),n.canvas.height=e.getHeight(),t.putImageData(e.getImageData(),0,0)):t.clearRect(0,0,n.canvas.width,n.canvas.height)},this.getSelectedImage=function(){return n.images[n.getSelectedImageIndex()]},this.getCurrentHistogram=function(){return n.histograms[n.getSelectedImageIndex()]},this.getSelectedImageIndex=function(){return n.selected},this.isAnyImageSelected=function(){return 0!==n.images.length},this.updateImageHistogram=function(){n.histograms[n.getSelectedImageIndex()].setImage(n.getSelectedImage())},this.getImageIndex=function(e){for(var t=n.getImageTitles(),a=0;a<t.length;a++)if(t[a]===e)return a},this.images=[],this.histograms=[],this.updateMethod=t,this.resetActionMethod=a}return Object(s.a)(e,[{key:"applyPointOperation",value:function(e,t){for(var a=this.getSelectedImage(),n=0;n<a.getWidth();n++)for(var r=0;r<a.getHeight();r++){a.setPreviousState();var i=a.getColor(n,r,t);a.setNextState();var o=e.getValue(i);a.setColor(n,r,t,o)}this.updateImageHistogram(),this.updateImageCanvas(),this.updateMethod()}}],[{key:"imageIsValid",value:function(e){return void 0!==e&&(void 0!==e.getImageData()&&void 0)}}]),e}(),On=a(143),xn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={controller:void 0,currentAction:void 0,onKeyPressed:void 0,keyAction:void 0},a.updateController=function(){a.setState({controller:a.state.controller})},a.updateCurrentAction=function(e){a.setState({currentAction:e})},a.getCurrentActionName=function(){var e="Action",t=a.state.currentAction;k.items.some(function(a){var n=a.options.filter(function(e){return e.id==t});e=n.length>0?n[0].name:e});return e},a.updateKeyController=function(e,t){a.setState({onKeyPressed:e,keyAction:t})},a.state.controller=new In(a.updateController,a.updateCurrentAction),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.getCurrentActionName();return r.a.createElement(L.MuiThemeProvider,{theme:ye},r.a.createElement("div",{className:"grid-container App"},r.a.createElement(On.b,{keyEventName:On.a,keyValue:this.state.onKeyPressed,onKeyHandle:this.state.keyAction}),r.a.createElement("div",{className:"grid-item item-menu"},r.a.createElement(N,{items:k.items,updateAction:this.updateCurrentAction})),r.a.createElement("div",{className:"grid-item item-workspace"},r.a.createElement(bn,{controller:this.state.controller,keyController:this.updateKeyController})),r.a.createElement("div",{className:"grid-item item-info"},r.a.createElement(we,{theme:ye,currentActionName:e,controller:this.state.controller})),r.a.createElement("div",{className:"grid-item item-action"},r.a.createElement(Ya,{controller:this.state.controller,currentAction:this.state.currentAction,currentActionName:e})),r.a.createElement("div",{style:{display:"none"},className:"grid-item item-footer"},r.a.createElement(En,null))))}}]),t}(n.Component);o.a.render(r.a.createElement(xn,null),document.getElementById("root"))}},[[210,2,1]]]);
//# sourceMappingURL=main.ba83883f.chunk.js.map